.buildDocker:
  image: ackee/docker-gcr:v0.0.5
  stage: build
# variables specify variables in the certain job!
#  variables:
#    GCLOUD_PROJECT_ID: ${GCLOUD_PROJECT_ID_DEVELOPMENT}
  script:
    - gcr-init
    - docker build --build-arg SSH_KEY -t ${IMAGE_NAME}:${IMAGE_TAG} .
    - docker tag ${IMAGE_NAME}:${IMAGE_TAG} eu.gcr.io/${GCLOUD_PROJECT_ID}/${PROJECT_NAME}/${APP_NAME}:${IMAGE_TAG}
    - docker push eu.gcr.io/${GCLOUD_PROJECT_ID}/${PROJECT_NAME}/${APP_NAME}:${IMAGE_TAG}
# specify conditions in the certain job!
#  only:
#    refs: ["development"]
#    variables:
#      - $CI_PIPELINE_SOURCE == "push"
